Приоритет ?:
============

  
2018-12-09, 23:59  
 Несмотря на то, что я повесил на стенку на рабочем месте таблицу с приоритетами операций в Си/Си++, всё равно иногда напарываюсь.   
   
 Я очень люблю операцию ?:. Она позволяет многие длинные конструкции заменять на более короткие -- и более понятные. Хотя наворотить с ней можно и совершенно непонятную фигню.   
   
 Вот, например, вместо:   
   
 if(a>3) a++; else a--;   
   
 можно написать:   
   
 a+=a>3?1:-1;   
   
 Не всем кажется, что второй вариант понятен, но я не про это.   
   
 Приоритет этой операции один из самых низких. Он такой же, как у присваивания, поэтому в данном случае всё правильно работает только за счёт того, что ассоциативность у присваивания -- справа налево (за счёт этого работают штуки вроде a=b=c=0 ![;)](http://static.diary.ru/picture/1136.gif) . То есть, ?: вычисляется раньше, чем присваивание.   
   
 Но могут быть и более сложные случаи, например:   
   
 a=x\*invert?1:-1;   
   
 Тут ошибка. Сначала икс умножится на инверт, в то время как задумка была в том, чтобы a получила значение либо x, либо -x. Вот на этом-то я и накололся.   
   
 Поэтому ?: надо всегда заключать в скобки:   
   
 a=x\*(invert?1:-1);   
  
<https://diary.ru/~zHz00/p216759435_prioritet.htm>  
  
Теги:  
[[Программирование]]  
[[Фейлы]]  
ID: p216759435  


Комментарии: 13
---------------

  


---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (1/13) | 2018-12-10, 08:25 | Hikedaya | c737175969 |

  
  Не всем кажется, что второй вариант понятен    
 Я бы сказал, что он вообще не понятен.   
 Кстати, все пытаюсь перейти на VSCode вместо штатного Powershell ISE. Получается пока медленно. Так вот - так же медленно VSC заставляет меня отвыкать от сокращенных форм записи командлетов (нервно реагирует даже на select вместо select-object, а уж про % вместо foreach вообще молчу). Аргументирует тем, что читабельность кода падает. И я начинаю с ним соглашаться.   
 ^c737175969

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (2/13) | 2018-12-10, 09:17 | Гость | c737176444 |

  
 Нет ли в нашем мире (в поведении людей, в функционировании общества, экономики, исторических событий, чего угодно) признаков работы программы (программ)?   
 ^c737176444

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (3/13) | 2018-12-10, 13:21 | zHz00 | c737180659 |

  
  [Hikedaya](http://hikedaya.diary.ru "Записная книжка")  ,   
 >>Я бы сказал, что он вообще не понятен.   
   
 Вот. Возможно, это сила привычки, когда такие выражения выцепляются взглядом и понимаются отдельно.   
   
 >>VSC заставляет меня отвыкать от сокращенных форм записи командлетов (нервно реагирует даже на select вместо select-object, а уж про % вместо foreach вообще молчу). Аргументирует тем, что читабельность кода падает. И я начинаю с ним соглашаться.   
   
 Типичная дилемма удобство вс. безопасность или удобство написания вс. удобство чтения. Я тут интересовался языком Rust. Он позиционируется как замена Си с улучшенной читаемостью и безопасностью. Достигается это различными запретами времени компиляции. Привыкшие по Си совершать какое-нибудь неявное преобразование типов, будут спотыкаться -- их просто дальше не пустят.   
   
 >>Нет ли в нашем мире (в поведении людей, в функционировании общества, экономики, исторических событий, чего угодно) признаков работы программы (программ)?   
   
 Вы про то, не живём ли мы в матрице? Есть аргументы в пользу этого, но, на мой взгляд, довольно слабые. Ознакомиться с ними можно тут:   
  [www.youtube.com/watch?v=SnQkTfSpfOU](https://www.youtube.com/watch?v=SnQkTfSpfOU)    
   
 Если вы про что-то другое, то поясните, о чём вы.   
 ^c737180659

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (4/13) | 2018-12-10, 13:43 | RetXiRT suiR@ttig@$ | c737181143 |

  
   [zHz00](https://zHz00.diary.ru "Untitled")  , отключи графические смайлы к посте.    
 ^c737181143

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (5/13) | 2018-12-10, 13:52 | zHz00 | c737181354 |

  
  [RetXiRT suiR@ttig@$](http://Hellspawn.diary.ru "Горчичник")  , есть!   
 ^c737181354

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (6/13) | 2018-12-10, 21:04 | Hikedaya | c737191406 |

  
  [zHz00](https://zHz00.diary.ru "Untitled")  ,  Привыкшие по Си совершать какое-нибудь неявное преобразование типов    
 А такие еще есть?   
 ^c737191406

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (7/13) | 2018-12-10, 21:08 | zHz00 | c737191530 |

  
  [Hikedaya](http://hikedaya.diary.ru "Записная книжка")  , конечно. Я каждый день в зеркало смотрюсь вот. Есть.   
 ^c737191530

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (8/13) | 2018-12-10, 21:25 | RetXiRT suiR@ttig@$ | c737192052 |

  
  зХз каждый день смотрелся в зеркало, чтобы заметить неявные преобразования, типа. Но так и не заметил. Потому что они неявные.    
 ^c737192052

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (9/13) | 2018-12-10, 22:11 | zHz00 | c737193331 |

  
  [RetXiRT suiR@ttig@$](http://Hellspawn.diary.ru "Горчичник")  , ))). Они такие неявные, потому что медленные.   
 ^c737193331

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (10/13) | 2018-12-10, 23:55 | RetXiRT suiR@ttig@$ | c737196471 |

  
  Как черепаха?    
 ^c737196471

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (11/13) | 2018-12-11, 01:10 | zHz00 | c737197773 |

  
  [RetXiRT suiR@ttig@$](http://Hellspawn.diary.ru "Горчичник")  , ещё медленнее.   
 ^c737197773

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (12/13) | 2018-12-11, 01:11 | zHz00 | c737197790 |

  
 -- На чём стоит земля?   
 -- На трёх слонах.   
 -- А те?   
 -- На трёх китах.   
 -- А те?   
 -- На огромной черепахе.   
 -- А черепаха эта на чём стоит?   
 -- На ещё большей черепахе.   
 -- А она на чём?   
 -- А там дальше -- сплошные черепахи.   
 ^c737197790

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (13/13) | 2018-12-11, 09:57 | RetXiRT suiR@ttig@$ | c737200444 |

  
  Фрактал наоборот?    
 ^c737200444