Ещё раз о сглаживании шрифтов: как полностью отключить ClearType в Windows 8?
=============================================================================

  
2015-08-17, 23:42  
  *Пока другие уже  [вовсю](http://himself.diary.ru/p205230643.htm)   [трахаются](http://himself.diary.ru/p205282817.htm)   [с десяткой](http://himself.diary.ru/p205414174.htm)  , я только начинаю старомодно насиловать восьмёрку.   
   
 В статье рассмотрены методы отключения сглаживания шрифтов в ОС Windows 8/8.1. Описано, какие области интерфейса ОС затрагивает каждый из методов. Кроме того, рассмотрены вопросы замены стандартных шрифтов.*    
   
  [(читать статью)](https://zHz00.diary.ru/p205429986.htm?index=1#linkmore205429986m1)      
   *Make the text on your screen easier to read   
 [x] Turn  **off**  ClearType*     
   
 Итак, как же полностью отключить сглаживание шрифтов в Windows 8?   
 Если коротко, то никак. А дальше начинаются технические подробности.   
   
 Я уже писал раньше, что  [я не люблю сглаживание](О%20сглаживании%20шрифтов)  . Поэтому хотел бы, чтобы его можно было полностью отключить. Однако начиная с Windows 7 это легко можно сделать только с "классической" темой, с Аэро -- сложно. А в Windows 8 полное отключение сглаживания невозможно. Кроме того, там нет классической темы.   
   
 О том, что я напишу ниже, в той или иной степени написано в интернете, в том числе  [вот тут](http://forum.ixbt.com/topic.cgi?id=22:76626)  , если прочитать полностью, можно узнать почти то же самое. Отличие данной статьи в том, что я не только пишу, что делать, но и об'ясняю, что это значит и почему это нужно. Кроме того, приведены пояснительные скриншоты с результатами.   
   
 Поскольку тема статьи деликатная, сообщаю, что картинки надо открывать в масштабе 100% (а не 97% и не 200%), иначе будет непонятно, о чём я пишу. В связи с этим, вместо превьюшек я публикую только ссылки.   
   
 Итак, сглаживание шрифтов. В восьмёрке есть целых две опции для настройки сглаживания:   
 1. System (Win+Pause)-> Advanced system settings -> вкладка Advanced (открыта по-умолчанию) -> Performance -> Smooth edges of screen fonts.   
 2. Control Panel -> Fonts -> Adjust ClearType text -> Turn on ClearType.   
   
 Они работают совместно. По идее, они должны делать одно и то же, но это не так.   
   
 1. Если включена первая, но отключена вторая, то в некоторых местах системы шрифт остаётся несглаженным, а в других -- сглаженным. Вот пример:   
   
  [i.imgur.com/qNwKDzq.png](http://i.imgur.com/qNwKDzq.png)    
   
 2. Если включить вторую, первая устанавливается автоматически. В этом случае все шрифты в системе становятся сглаженными (по-умолчанию). Если отключить вторую, первая автоматически не сбрасывается.   
 3. Если отключены обе, то по большей части сглаживание отключается, однако в некоторых местах оно остаётся. Конкретно:   
   
 а) Экраны входа в систему, безопасности и т.п., Start screen и все метро-приложения (т.к. я экспериментировал на 2012 server r2, у меня из приложений было только PC Settings, так что поправьте меня, если в других приложениях не так), а также те системные уведомления, которые сделаны при помощи всплывающих подсказок огромным шрифтом по всему экрану ("выберите причину выключения компьютера", "ваша флешка нуждается в проверке" и т.п.) -- я не знаю точно, через что это сделано, но если через метро -- то это сюда же   
 б) Панель задач и все уведомления на ней (включая всплывающие подсказки).   
 в) Большая часть страниц панели управления -- те из них, которые выполнены в стиле HTML-страниц с белым фоном.   
 г) Страницы в Internet Explorer (: и в некоторых других программах, например, Server Manager (может, он использует IE?).   
 д) Тексты некоторых диалоговых окон, например, уведомления о том, что в реестре ничего не найдено.   
   
 Вот пример по пунктам б) и в):   
   
  [i.imgur.com/BUM0psF.png](http://i.imgur.com/BUM0psF.png)    
   
 Сразу скажу, что по пункту а) у меня ничего не вышло, а по пункту г) я даже не захотел работать. Пункты б), в) и д) связаны, насколько я понял по обрывочным сведениям в интернете, с тем, что WPF, с использованием которых они (пункты) работают, не поддерживает отключение сглаживания в принципе, однако если пункт д) тоже сделан через WPF, то это лол.   
   
 По всем пунктам, кроме б) я был готов смириться, но панель задач у меня перед глазами постоянно, так что конкретно по данному вопросу простить Microsoft я не мог.   
   
 Когда я только начал экспериментировать по данной теме, я решил для начала поменять все системные шрифты на любимую мной Tahoma. Однако обнаружил, что в восьмёрке отсутствует возможность настройки шрифтов. Точнее, отсутствует в интерфейсе -- в реестре возможность всё ещё есть, но там надо либо править вручную, либо воспользоваться программой  [Windows Font Changer](http://www.mediafire.com/download/zf60cq4sfqcdxw5/Windows+8+Font+Changer.exe)  . Настройка шрифтов проводится в реестре по адресу HKEY\_CURRENT\_USER\Control Panel\Desktop\WindowMetrics . Как это делать вручную -- описывать не буду, это длинно.   
   
 Однако, даже когда я воспользовался данной программой, я обнаружил, что в ряде мест шрифт иной. Во-первых, в той же самой панели задач, а во-вторых, ещё кое-где. Вот подборка:   
   
  [i.imgur.com/lbRJ9w1.png](http://i.imgur.com/lbRJ9w1.png)    
   
 Как выяснилось, это и есть тот самый шрифт Segoe UI, о котором я много слышал. Он мне не нравится. Но его нельзя никак поменять -- его использование в приведённых местах вшито в систему. Поскольку я не собираюсь использовать его для своих нужд (потому что он мне не нравится), можно, наверное, его вообще удалить? Но какой шрифт будет тогда использоваться вместо него?   
   
 В Windows предусмотрен специальный механизм, подставляющий имеющиеся в наличие шрифты вместо тех, которые заказаны, если заказанные отсутствуют. Т.е. чтобы вместо Segoe UI лицезреть Tahoma, его (Segoe UI) нужно удалить, а в специальном разделе реестра написать, что вместо Segoe UI надо использовать Tahoma.   
   
 Т.е. по идее, достаточно внести следующие изменения:   
 1.   
 [HKEY\_LOCAL\_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Fonts]   
 "Segoe UI (TrueType)"=""   
 "Segoe UI Bold (TrueType)"=""   
 "Segoe UI Italic (TrueType)"=""   
 "Segoe UI Bold Italic (TrueType)"=""   
 "Segoe UI Semibold (TrueType)"=""   
 "Segoe UI Light (TrueType)"=""   
   
 И все остальные, если будут, кроме Segoe UI Symbol и Segoe UI Emoji -- из первого берутся некоторые символы типа стрелочек в Start Screen, и если вы его удалите, там будут квадратики; второй, скорее всего, не нужен, т.к. содержит смайлики, но можно и оставить. Можно вообще удалить эти значения, а не писать, что они равны пустой строке. Я, чтобы не было проблем от экспериментов, перед внесением изменений сохранил всю ветку Fonts и потом несколько раз её восстанавливал, так что всем советую сделать то же самое, т.к. может возникнуть необходимость вернуть всё обратно.   
   
 Данное действие удалит записи о шрифте Segoe UI, хотя технически он будет лежать на винчестере. Если восстановить старые значения в реестре, шрифт опять появится.   
   
 2.   
 [HKEY\_LOCAL\_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\FontSubstitutes]   
 "Segoe UI"="Tahoma"   
   
 Данное действие устанавливает подстановку шрифта Tahoma, если Segoe UI не найден. Я тут сделал подстановки для всех версий, т.е. "Segoe UI Bold"="Tahoma", "Segoe UI Italic"="Tahoma" и т.д., по одной записи на каждое удалённое значение из п.1. Необходимо ли так делать -- я не знаю. В топике, ссылку на который я приводил выше, была только одна строка.   
   
 Хотя данное действие действительно уберёт весь Segoe UI из системы и заменит его на Tahoma, сглаживание по пунктам а)-д) сохранится.   
   
 Я долго думал, почему Segoe UI не удаляется, пока не понял, что это не он. Это та самая Tahoma. Со сглаживанием.   
   
 Тогда я решил -- ладно, хрен с ним, выберу какой-нибудь шрифт, который мне нравится и сглаженным и несглаженным (т.к. Segoe UI в некоторых местах отображается несглаженным, становится понятно, что я буду видеть целевого кандидата в обоих версиях). Включил сглаживание, стал перещёлкивать шрифты в WordPad. Попробовал wlmaru2000.ttf, в котором когда-то очень хорошо смотрелись сглаженные иероглифы (когда я читал Кланнад), но он в маленьком размере выглядел очень плохо. А потом внезапно обнаружил, что мой горячо любимый MS Mincho почему-то отображается несглаженным даже со включённым сглаживанием! То, о чём я писал в предыдущем посте о сглаживании (ссылка в начале). Я быстренько заменил подстановку с Tahoma на MS Mincho. И ура, сглаживание пропало! Хотя вид при этом у системы был своеобразный. Осталось разобраться, почему так.   
   
 Сначала я решил, что в векторных шрифтах где-то есть флажок -- не использовать сглаживание. И типа, если поправить файл шрифта, можно будет забыть о нём (о сглаживании... но о шрифте, на самом деле тоже, потому что следит подпись). Но поиск сведений по вопросу о том, как отключить сглаживание для отдельных шрифтов, результатов не дал. Тогда я решил подойти с другой стороны -- решил выяснить, как  **включить**  сглаживание в MS Mincho. Как выяснилось, сделать это нельзя. Потому что! Для маленьких размеров в файле шрифта предусмотрены  *растровые*  изображения. А я восхищался -- типа, как сделали векторный шрифт с иероглифами, которые в маленьком размере отлично смотрятся! А это фальшивка, потому что маленький шрифт -- совсем другая вещь.   
   
 Но зато теперь стало понятно, что для того, чтобы в системе сглаживания не было на панели задач, нужно заменить шрифт на растровый! Растровые шрифты не сглаживаются. Т.е. надо написать в реестре:   
 [HKEY\_LOCAL\_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\FontSubstitutes]   
 "Segoe UI"="MS Sans Serif"   
   
 В системе есть ещё несколько растровых шрифтов, кроме MS Sans Serif. Или можно раздобыть где-нибудь ещё. В том числе, существует растровая Tahoma (я, правда, её пока ещё не отыскал).   
   
 Вот результат:   
   
  [i.imgur.com/Gwq2WSz.png](http://i.imgur.com/Gwq2WSz.png)    
   
 Что касается шрифта в Start Screen. Тут всё печально. По-умолчанию там Segoe UI. Я поставил подстановку MS Sans Serif вместо Segoe UI. Но шрифт заменился на Tahoma! Тогда я поставил подстановку Tahoma на MS Sans Serif и удалил Tahoma, но шрифт заменился на Arial! Т.е. складывается ощущение, что те шрифты вообще не могут быть растровыми. Если у вас есть сведения о том, как выключить сглаживание там -- напишите.   
   
 Я полагаю, что в следующих версиях Windows либо научатся сглаживать растровые шрифты, либо запретят их применение в интерфейсе повсеместно. Ибо нефиг сидеть без сглаживания.     
  
<https://diary.ru/~zHz00/p205429986_ewyo-raz-o-sglazhivanii-shriftov-kak-polnostyu-otklyuchit-cleartype-v-windows-8.htm>  
  
Теги:  
[[Программы]]  
[[Статьи]]  
ID: p205429986  


Комментарии: 7
--------------

  


---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (1/7) | 2015-08-19, 03:50 | Гость | c693705013 |

  
 А ты не оправдывайся, тормоз!   
 ^c693705013

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (2/7) | 2015-08-19, 10:02 | zHz00 | c693709735 |

  
 Послушав отзывы на десятку, думаю, что лучше побуду пока тормозом).   
 ^c693709735

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (3/7) | 2015-09-18, 20:24 | Гость | c695306691 |

  
   **МОЛОДЕЦ- так Держать!**     
 ^c695306691

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (4/7) | 2015-09-19, 01:17 | zHz00 | c695321653 |

  
  **Гость**  , кого держать?   
 ^c695321653

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (5/7) | 2020-05-29, 19:49 | kulakov74 | c747414885 |

  
 Мда, я тоже в своё время намучался, только я пошёл по другому пути, т.к. не смог заставить работать font substitute - вместо Tahoma включался Arial. Мой результат тут   
  [ks74.livejournal.com/1692.html](https://ks74.livejournal.com/1692.html)    
 правда на английском.   
 ^c747414885

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (6/7) | 2020-05-29, 20:22 | zHz00 | c747415376 |

  
  [kulakov74](http://ks74.diary.ru)  , а это, есть документация с описанием, что в msstyles что обозначает?   
 ^c747415376

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (7/7) | 2020-05-29, 20:34 | kulakov74 | c747415514 |

  
 У меня нет, я всё методом тыка определял. Но вообще конечно должна быть.   
 ^c747415514