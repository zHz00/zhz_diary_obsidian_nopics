Таймстампы в Miranda
====================

  
2012-08-11, 19:15  
 Потрясающую вещь обнаружил. Совершенно случайно.   
   
 Таймстампы в Miranda IM хранятся в каком-то внутреннем формате. Который не зависит от текущих настроек часового пояса. Возможно, в UTC. То есть, когда переводишь часовой пояс на компьютере или переносишь миранду на другой компьютер, все таймстампы у сообщений автоматом сдвигаются. И времени на это не тратится, значит фактических изменений в данных не происходит.   
   
 Раньше я думал, что если я переведу часовой пояс на предыдущий или перенесу на компьютер с другим часовым поясом, то в хистори может возникнуть пересечение старых и новых сообщений. А вот и нет. Пересечения не будет (разумеется, если дело только в часовом поясе).   
  
<https://diary.ru/~zHz00/p179565867_tajmstampy-v-miranda.htm>  
  
Теги:  
[[Программы]]  
ID: p179565867  


Комментарии: 7
--------------

  


---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (1/7) | 2012-08-11, 21:57 | korrshun | c607606096 |

  
 юникстайму как-то пофиг на часовые пояса, ага.   
 ^c607606096

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (2/7) | 2012-08-11, 22:17 | zHz00 | c607608421 |

  
  [korrshun](http://Igel-kun.diary.ru "kimi wo shiranai monogatari")  , юникстайму-то да. Но для преобразования-то надо знать часовой пояс тоже. Кстати юникстайм считает число секунд именно по определённому часовому поясу?   
   
 В данном случае если время верное, а пояс не тот, в итоге таймстампы будут неправильные.   
 ^c607608421

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (3/7) | 2012-08-13, 09:13 | korrshun | c607729308 |

  
 юникстайм - это дельта. не таймстамп.   
 преобразования для сортировки не требуется.   
 вончо откопал -  [habrahabr.ru/post/100741/](http://habrahabr.ru/post/100741/)  это дельта от 01.01.1970 00:00UTC.   
 ^c607729308

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (4/7) | 2012-08-13, 13:49 | zHz00 | c607750720 |

  
 А чем дельта не таймстамп? Вопрос был в том, во всём мире одинаковое ли юникстайм одновременно? Видимо, да.   
 (про Новосибирск)   
 >>а в начале века в нем вообще два пояса было — граница пояса проходила по реке Оби, и на разных берегах были разные пояса   
   
 Жееесть!   
   
 Проблему у юникстайма всё равно остаются те же, только переносятся в другое место. И что делать, если у клиента поставлен не тот пояс? NNTP может тогда просто не сработать.   
   
 Вот ещё хорошая статья:  [habrahabr.ru/post/146109/](http://habrahabr.ru/post/146109/)    
 ^c607750720

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (5/7) | 2012-08-13, 18:17 | korrshun | c607779061 |

  
 что-то подумал, да, посикс таймстамп тоже вполне себе дельта.   
 только она гвоздями получается прибита не UTC а к текущему часовому поясу.   
 если у клиента не тот пояс, тогда да, неприятно выходит.   
 а миранда получается и хорошо переживает - початиться на машинке с другим поясом а потом притащить назад базу?   
 ^c607779061

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (6/7) | 2012-08-13, 19:08 | zHz00 | c607784306 |

  
  [korrshun](http://Igel-kun.diary.ru "kimi wo shiranai monogatari")  , теперь оказывается, что да.   
 Э... разве посикс таймстамп разве не то же что и юникс таймстамп?   
   
 Или из-за чего сыр-бор? На всякий случай: слово "таймстамп" значит просто "метка времени". То есть время по любому кем-либо описанному способу описания времени -- это таймстамп. И не важно -- дельта это или нет.   
 ^c607784306

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (7/7) | 2012-08-14, 08:02 | korrshun | c607837501 |

  
 что-то в голове у меня каша уже.   
 в голове застряло, что таймстамп - это для людей.   
 ^c607837501