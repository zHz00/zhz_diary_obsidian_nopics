Лишняя строчка
==============

  
2023-09-15, 04:47  
 Поступает от пользователя жалоба, что не работает одно из измерений. Открываю исходный код в нужном месте. Вижу там такое:   
   
 /\*if(module\_installed)   
 {   
 //...   
 }\*/   
 if(module\_installed)   
 //так, это я отключаю   
 if(data\_value>data\_max)   
 {   
 //...   
 }   
   
 Отступы были везде одинаковые. Но это была лишь видимость. Если приглядеться, то становится видно, что иф, который про данные, вложен в иф, который про модуль.   
   
 На приборе модуль установлен не был. Поэтому алгоритмическая часть, которая про данные, просто не вызывалась.   
   
 Раньше жалоб не было, потому что модуль всегда был установлен, и условие всегда проходило. Но в этот раз модуль был отключён. И вот результат.   
   
 Но эта ошибка -- не ошибка выставления отступов и не ошибка пропущенного кода. Наоборот. Покопавшись в репозитории я выяснил, что один из блоков кода был закомментирован за ненадобностью (здесь он приведён первым). Но его первую строчку я почему-то продублировал сразу после комментария.   
  
<https://diary.ru/~zHz00/p221753824_lishnyaya-strochka.htm>  
  
Теги:  
[[Говнокод]]  
[[Борьба с техникой]]  
ID: p221753824  


Комментарии: 7
--------------

  


---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (1/7) | 2023-09-15, 08:59 | Филавандрель | c756085330 |

  
 мне вот че интересно   
 если какая-нибудь крыса в коде заменит c на кириллическую с, как долго придется искать ошибку?   
 ^c756085330

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (2/7) | 2023-09-15, 11:58 | zHz00 | c756085688 |

  
  [Филавандрель](https://lavi.diary.ru "Дорога без возврата")  , зависит от компилятора. Если он не поддерживает русские имена переменных, то сразу покажет: "некорректные символы".   
   
 Если поддерживает, то ситуация сложнее. Однако, если ты уже пару раз в жизни сталкивался с проблемой замены с на c, то вычислишь шпиона довольно быстро, т.к. всё равно будут показываться ошибки, но странные. Например, о необъявленном идентификаторе, а ты смотришь и такой -- "да вот же он!"   
   
 Гораздо хуже ситуация в некоторых интерпретируемых языках, там где отсутствие объявления переменной не является ошибкой. В некоторых случаях у тебя могут образоваться две переменные с одинаковыми на вид именами, но без синтаксических ошибок. Там можно будет искать ошибку долго...   
 ^c756085688

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (3/7) | 2023-09-15, 12:58 | Филавандрель | c756085830 |

  
  Гораздо хуже ситуация в некоторых интерпретируемых языках, там где отсутствие объявления переменной не является ошибкой. В некоторых случаях у тебя могут образоваться две переменные с одинаковыми на вид именами, но без синтаксических ошибок. Там можно будет искать ошибку долго...    
 а это частый случай?   
 ^c756085830

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (4/7) | 2023-09-15, 15:32 | zHz00 | c756086130 |

  
  [Филавандрель](https://lavi.diary.ru "Дорога без возврата")  , ну с КРЫСАМИ, которые меняют буквы, я не встречался, а вот случайные ошибки бывали. Хорошо что на всяких пхп и питонах у меня маленькие проектики и разобраться там не так сложно.   
   
 Может быть, что ты в одном месте переменную называешь, допустим, data\_size, а в другом size\_data. По ошибке. Ты имел ввиду одну и ту же сущность, но назвал по разному. Ну и начинаешь присваивать и считывать и обнаруживаешь, что присвоенного значения в нужном месте нет. Потому что оно в другой переменной.   
 ^c756086130

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (5/7) | 2023-09-15, 16:57 | Филавандрель | c756086356 |

  
  [zHz00](https://zHz00.diary.ru "Untitled")  , я не совсем точно написал, имел ввиду это:   
  *Гораздо хуже ситуация в некоторых интерпретируемых языках, там где отсутствие объявления переменной не является ошибкой.*    
 часто ли такое случается, или сегодня почти везде среда разработки подсказывает, в какой строке подстава   
 ^c756086356

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (6/7) | 2023-09-15, 17:08 | zHz00 | c756086375 |

  
  [Филавандрель](https://lavi.diary.ru "Дорога без возврата")  , я тоже не совсем точно написал. Я имел ввиду это:   
  *Гораздо хуже ситуация в некоторых интерпретируемых языках, там где переменные объявлять не только не надо, но и нельзя.*    
   
 В этих языках переменные создаются при первом присваивании. Это и есть "как бы" объявление. Синтаксис, специально предназначенный для объявления переменных, отсутствует. Поэтому никакую ошибку найти нельзя. Её нет.   
   
 Есть утилиты, называемые "статические анализаторы кода". Они просматривают текст программы и ищут "подозрительные" места, которые не являются синтаксическими ошибками. Они помогают как раз искать такие странные логические ошибки. К сожалению, я не знаю, есть ли такие утилиты для питона. Я знаю только про утилиты для Си и Си++, но там нет проблем с объявлениями.   
 ^c756086375

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (7/7) | 2023-09-15, 17:29 | Филавандрель | c756086418 |

  
  [zHz00](https://zHz00.diary.ru "Untitled")  , найс, теперь понял   
 ^c756086418