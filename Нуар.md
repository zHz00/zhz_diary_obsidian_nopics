Нуар
====

  
2018-11-06, 23:59  
 Очевидно, что локальная переменная действует только в своей области видимости. Если в область видимости осуществлён повторный вход, значение не сохранится.   
   
 Си++, да и Си достаточно новой версии развращают тем, что можно локальные переменные об'являть в любом месте, а не только в начале блока (или в начале функции, как в Паскале).   
   
 Обычно считается хорошим стилем -- об'являть переменную непосредственно перед использованием. Но это приводит к неожиданным факапам.   
   
 
```
int main()  
	{
		//инициализация контроллера
		for(;; )//главный цикл
			{
				//пять страниц кода
				int state=0;//состояние автомата
				//пусть автомат будет простой
				//входных сигналов нет
				//на каждом шагу переходит в соседнее
				//из двух состояний
				if(state==0)
					{
						state=1;
						//действия
					}
				else
					{
						state=0;
						//действия
					}
			}  
	}
```
 Долго думал, почему автомат всё время в нулевом состоянии и в первое не переходит? А вот. Пришлось переносить state в начало main().   
  
<https://diary.ru/~zHz00/p216552728_nuar.htm>  
  
Теги:  
[[Программирование]]  
[[Говнокод]]  
ID: p216552728  


Комментарии: 5
--------------

  


---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (1/5) | 2018-11-07, 04:56 | Foul thing | c736356961 |

  
 Можно статической ее сделать.   
 ^c736356961

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (2/5) | 2018-11-07, 18:44 | roadischosen | c736370650 |

  
  [Foul thing](http://foulthing.diary.ru "Temporary Internet Flies")  , c  ~~языка~~  кончиков пальцев снял ![:)](http://static.diary.ru/picture/3.gif)   
   
  [zHz00](https://zHz00.diary.ru "Untitled")  , ошибка в теме: П  **~~р~~**  огроммирование.   
 ^c736370650

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (3/5) | 2018-11-08, 01:19 | zHz00 | c736382603 |

  
  [Foul thing](http://foulthing.diary.ru "Temporary Internet Flies")  , можно! Но есть побочный эффект в виде сохранения значения между вызовами функции. В данном случае это роли не играет, т.к. мейн вызывается только один раз, так что действительно можно было сделать так.   
  [roadischosen](http://roadischosen.diary.ru)  , спасибо, исправил.   
 ^c736382603

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (4/5) | 2018-11-08, 13:58 | RetXiRT suiR@ttig@$ | c736391347 |

  
  
>   мейн  

 Кун?    
 ^c736391347

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (5/5) | 2018-11-09, 00:02 | zHz00 | c736407919 |

  
  [RetXiRT suiR@ttig@$](http://Hellspawn.diary.ru "Горчичник")  , тян!   
 ^c736407919