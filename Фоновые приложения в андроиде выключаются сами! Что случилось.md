Фоновые приложения в андроиде выключаются сами! Что случилось?
==============================================================

  
2024-03-06, 02:11  
 Когда еду в поле на коне, записываю трек выезда. Но этот пост не про коней, а про трек. Поэтому этот пост здесь.   
   
 Для записи трека я использую программу с уникальным названием Speedometer GPS. Если вы знаете другие ведроид-программы, которые выдают треки в стандартном формате (например, GPX), сообщите, пожалуйста.   
   
 Программа сохраняет трек только в конце. Если программа по любой причине завершилась -- трека не будет. Довольно обидно слезть с коня и обнаружить, что трек не записывался! И я оказывался в такой ситуации.   
   
 В один момент я понял, что у меня не записались уже несколько треков подряд. При этом запускаешь запись -- идёт. Проверяешь через полчаса -- идёт. Вернулся -- ни-ху-я. То есть, программа стабильно падает, но всегда не сразу.   
   
 Раньше такого не было.   
   
 У меня было несколько версий, почему это происходит. И все они были связаны с тем, что незадолго до ситуации я на свою голову обновил операционную систему на смартфоне (теперь андроид 13).   
   
 Сразу скажу ответ. В старой прошивке было разрешение на работу в фоновом режиме. В новой прошивке это разрешение исчезло. Вместо него появилось другое, с похожим смыслом и похожим названием: Background power consumption management, которое я еле нашёл. GPS Speedometer не может самостоятельно разрешить себе работу в фоновом режиме, но он может выбросить пользователя на страницу с разрешением. И в связи с тем, что название разрешения изменилось, выбрасывание на его страницу перестало работать. А почему я его еле нашёл? Потому что технически оно не является "разрешением" и расположено в другом разделе настроек, а не в списке разрешений!   
   
 Для каждого приложения есть три варианта:   
   
 Restrict   
 Don't Restrict   
 Smart control   
   
 По умолчанию везде стояло последнее. И к нему было пояснение:   
   
 Automatically adjust app background activities according to your usage habits.   
   
 Практика показала, что "автоматически" означает "вырубать приложение через 30-40 минут работы". А мне надо писать трек 2-2.5 часа! Интересно, как ведроид собирался узнать мои привычки, если он мне сам выключал программу?   
   
 В общем, я поставил Don't Restrict и треки стали записываться нормально.   
   
 Но была ещё одна, минорная проблема. Я перестал видеть информацию о треке в шторке.   
   
 Я зашёл в разрешения уведомлений и с удивлением обнаружил, что я не могу ВКЛЮЧИТЬ уведомления. Ползунок серый и не двигается. Под ним издевательская надпись, что уведомления выключены по моей просьбе.   
   
 Погуглив, я обнаружил, что такой не один. У многих программ в ноябре 2023 года отвалились уведомления. И чтобы они вернулись, разработчикам пришлось переписывать их приложения. Обратная совместимость у ведроида на высоте. Хотя у других, очень старых приложений, ползунки уведомлений нормально включаются и выключаются.   
   
 Я же обновить программу не мог, потому что она не обновлялась как раз с октября 2023 года...   
   
 Это не первый раз, когда я встречаюсь с проблемами после обновления ПО. К сожалению, не всегда есть возможность не обновляться. Но если она есть -- пользуйтесь ей.   
  
<https://diary.ru/~zHz00/p221940960_fonovye-prilozheniya-v-androide-vyklyuchayutsya-sami-chto-sluchilos.htm>  
  
Теги:  
[[Программы]]  
[[Борьба с техникой]]  
ID: p221940960  


Комментарии: 3
--------------

  


---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (1/3) | 2024-03-06, 11:58 | Urban knight | c757951220 |

  
 Да, разрешение работать не выгружаясь, спрятанное в настройках батареи, а не в разрешениях - тот еще прикол.   
 Не знаю, как у тебя, а у меня там есть еще одна галочка "отзывать неиспользуемые разрешения". Что конкретно считается "неиспользуемым" там не написано, но так как сюрпризов не хочется, у важных приложений оно отключено =)   
 ^c757951220

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (2/3) | 2024-03-06, 22:31 | fosser | c757954769 |

  
 Хотел порекомендовать Aripuca GPS Tracker, но оказалось, что его уже давно не разрабатывают и он выпилен не только из Play Store, но и из F-Droid ![:(](/picture/1146.gif)   
   
 -- Minoru   
 ^c757954769

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (3/3) | 2024-03-06, 23:23 | RetXiRT suiR@ttig@$ | c757955058 |

  
 Неиспользуемые - это в течение довольно долгого времени, несколько месяцев (полгода?). В принципе, логично - они там молча наобновляются, а вдруг там что-то, что вам не понравилось бы? Опять же, экономия трафика.   
 ^c757955058