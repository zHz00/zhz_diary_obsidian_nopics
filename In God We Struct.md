In God We Struct
================

  
2017-08-28, 23:59  
 Написано:   
   
 
```
struct  
	{
		//...  
	} A,B,C;
```
   
   
 Это должно об'являть три переменных, типом которых является (безымянный) тип этой структуры.   
   
 Однако компилятор сообщает, что вместо A,B,C он ожидает идентификаторы. Но ведь это и есть идентификаторы!   
   
 Проверяю на кириллицу -- не подходит, буквы латинские. Заменяю на A0,B0,C0 -- всё работает.   
   
 Странно.   
   
 ОКАЗАЛОСЬ   
   
 что в заголовочном файле уже были строки:   
   
 #define A 0   
 #define B 1   
 #define C 2   
   
 В итоге последняя строка определения переменных после подстановок выглядела так:   
   
 } 0,1,2;   
   
 Да, тут идентификаторов действительно нет.   
   
 Главное, что в наличии таких дефайнов в заголовочном файле виноват я сам. Сначала я вместо об'ектов собирался использовать их условные номера. И подстановочные константы назвал по смыслу теми же именами. И забыл об этом.   
  
<https://diary.ru/~zHz00/p213580794_in-god-we-struct.htm>  
  
Теги:  
[[Программирование]]  
[[Говнокод]]  
[[Борьба с техникой]]  
ID: p213580794  


Комментарии: 10
---------------

  


---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (1/10) | 2017-08-29, 10:03 | Crawling Chaos | c724790569 |

  
 A, B, C - какие хорошие имена для переменных)))   
 ^c724790569

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (2/10) | 2017-08-29, 10:10 | zHz00 | c724790729 |

  
  [Crawling Chaos](http://degozaru.diary.ru "de gozaru")  , там были другие. Это для примера.   
 ^c724790729

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (3/10) | 2017-08-29, 10:31 | Crawling Chaos | c724791267 |

  
  [zHz00](https://zHz00.diary.ru "Untitled")  , и ещё вопрос, у тебя же плюсы, зачем ты структуры используешь?   
 ^c724791267

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (4/10) | 2017-08-29, 11:56 | zHz00 | c724793689 |

  
 Данная программа на голом Си для микроконтроллера. Хотя Си++ он и поддерживает.   
 ^c724793689

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (5/10) | 2017-08-29, 15:08 | korrshun | c724799795 |

  
 это к вопросу о пользе венгерки и использовании строго верхнего регистра только к макросам.   
  [Crawling Chaos](http://degozaru.diary.ru "de gozaru")  , большой разницы между struct и class в плюсах нет. Разве что в классах всё по дефолту приватное, а в структурах - публичное. и аналогичная разножопица с наследованием.   
 ^c724799795

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (6/10) | 2017-08-29, 15:15 | zHz00 | c724800006 |

  
 Именно с верхним регистром я и попался. Оригинальные названия были аббревиатурами (общепринятыми), поэтому и были большими буквами.   
 ^c724800006

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (7/10) | 2017-08-29, 15:16 | Crawling Chaos | c724800056 |

  
  [korrshun](http://Igel-kun.diary.ru "kimi wo shiranai monogatari")  , да я это помню ещё, но насколько мне известно, в плюсах структуры вроде как не юзают обычно, они скорее для совместимости там (или я не прав?). Поэтому и спрашивал.   
 ^c724800056

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (8/10) | 2017-08-30, 06:29 | korrshun | c724821660 |

  
  [Crawling Chaos](http://degozaru.diary.ru "de gozaru")  , не совсем. Зависит от принятого в компании стиля и уже существующей кодовой базы.  [google.github.io/styleguide/cppguide#Structs\_vs...](http://google.github.io/styleguide/cppguide#Structs_vs._Classes)  - гугл делает так, другие - по другому.   
  [zHz00](https://zHz00.diary.ru "Untitled")  , тогда предлагаю вкатать автозаменой венгерку по всему проекту и посмотреть, что ещё взорвётся ![:-D](http://static.diary.ru/picture/1133.gif)   
 ^c724821660

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (9/10) | 2017-08-30, 07:36 | zHz00 | c724822059 |

  
  [korrshun](http://Igel-kun.diary.ru "kimi wo shiranai monogatari")  , да, вот про такой подход слышал -- структуры для пассивных объектов, классы -- если есть функционал. Что касается венгерки -- почему должно взорваться? Скорее наоборот. Пока не знаю, что с венгеркой делать буду.   
 ^c724822059

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (10/10) | 2017-08-31, 08:13 | korrshun | c724854705 |

  
  [zHz00](https://zHz00.diary.ru "Untitled")  , я просто пару раз натыкался на shadowing переменных (больше в других языках, правда), когда у тебя вместо одной переменной оказывается другая из другого скоупа - очень обидно. вот потому и использую l\_ для локальных, m\_ для мемберов итд. ну и до кучи тип указываю довольно часто (n, l, s, p), если наименование недостаточно говорящее (а это часто случается, увы)   
 ^c724854705