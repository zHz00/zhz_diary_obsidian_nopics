Untitled [345]
==============

  
2015-01-14, 23:59  
 Когда найдено решение проблемы, но непонятны механизмы её возникновения -- это плохо. А когда проблема исчезла, но почему -- непонятно -- ещё хуже.   
   
 Итак. В процессе сборки (linking) проекта в MSVS 2005 компоновщик зависает! Причём только в версии Release. В версии Debug -- всё нормально. Зависать начинает только с определённой ревизии проекта -- до этого всё нормально. В той ревизии, на которой начало зависать, было изменено с десяток файлов и добавлено 4 BMP в ресурсы.   
   
 Стал сличать конфигурации.   
   
 ОКАЗАЛОСЬ   
   
 что перестало зависать при отключении опции компоновщика  **/LTCG**  (linker-time code generation). А чтобы сработало её отключение, пришлось отключить выбрасывание неиспользуемых ресурсов и оптимизацию (/GL) .   
   
 Вот почему при таких настройках работает?   
  
<https://diary.ru/~zHz00/p202128833_untitled-345.htm>  
  
Теги:  
[[Программы]]  
[[Программирование]]  
[[Борьба с техникой]]  
ID: p202128833  


Комментарии: 6
--------------

  


---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (1/6) | 2015-01-15, 02:55 | Гость | c681764489 |

  
 Это магия.   
 ^c681764489

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (2/6) | 2015-01-15, 12:22 | himself | c681776550 |

  
 Это даже не "исчезла, но почему - непонятно", а  ["отрезал руку, больше не болит"](http://himself.diary.ru/p192825009.htm)  )   
 ^c681776550

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (3/6) | 2015-01-15, 12:57 | zHz00 | c681778497 |

  
  [himself](http://himself.diary.ru "void")  , почему же? Хотя необходимость отключения оптимизации меня напрягает. А инкрементал оказался не при чём.   
 ^c681778497

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (4/6) | 2015-01-15, 15:41 | himself | c681788746 |

  
 Ошибка же появилась не из-за включения LTGG? Значит, ситуация такая: к ошибке приводит сочетание нескольких факторов, один из которых истинная причина, а другой - безобидное необходимое условие (LTGG). Отключение безобидного условия, конечно, убирает ошибку, но причина осталась, и кто знает, к чему ещё приведёт.   
   
 Кстати, ты пишешь:   
 > перестало зависать при отключении опции компоновщика /LTCG (linker-time code generation). А чтобы сработало её отключение, пришлось отключить выбрасывание неиспользуемых ресурсов и оптимизацию (/GL) .   
   
 А почему тогда именно при отключении LTGG, а не отключении выбрасывания ресурсов или GL? Ты же их отключил все вместе?   
 ^c681788746

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (5/6) | 2015-01-15, 17:55 | zHz00 | c681797077 |

  
  [himself](http://himself.diary.ru "void")  , нет, я менял настройки по очереди. Отключение только выбрасывания ресурсов или только оптимизации к успеху не приводит. LTCG сам по себе тоже ни к чему не приводит ПОТОМУ ЧТО если те предыдущие опции не поставлены в то положение, в которое я указал, компоновщик говорит, что не может отключить LTCG. Но скорее всего, причина действительно не в этой опции. Будем искать.   
 ^c681797077

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (6/6) | 2015-01-15, 18:09 | Гость | c681797833 |

  
 Предлагаю принести в жертву администратора-девственника.   
 ^c681797833