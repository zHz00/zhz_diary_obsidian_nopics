Проблемы с локалью в Windows 10
================================

   
 2023-10-27, 03:04   
  Не все знают, что такое локаль. Если коротко -- это когда вы лезете в...   
   
 Settings ->   
 Time & Language ->   
 Language ->   
 Administrative language settings ->   
 Administrative (вкладка) ->   
 Change system locale   
   
 И начинаете там шуровать. Кто играл в визуальные новеллы на японском, знает, что тут надо ставить японский, но тогда перестанут работать русские не-юникод программы (точнее будут, но только с крякозябрами).   
   
 Если у вас тут стоит английский, то с русскими программами опять будет беда.   
   
 Я же столкнулся с ситуацией, когда локаль установлена русская, но проблемы всё равно есть. Не-юникод программы отображаются верно, хотя шрифты почему-то немного не те. А вот файлы... с файлами не всё в порядке.   
   
 1. Архивы, содержащие кириллические имена файлов, распаковываются в ромбики с вопросительными знаками.   
 2. Текстовые не-юникод файлы открываются вижуал студиями неправильно, тоже показывают квадратики. Хотя в ноутпад++ всё работает верно. Ну и не компилируется ничего с ошибкой newline in constant, хотя никаких новых строк в этих квадратиках нету.   
   
 На дворе 2k23, а мы всё ещё боремся с крякозябрами в винде? Это нонсенс.   
   
 В чём же было дело? Как раз в 2k23 годе. Виндоуз 10 кроме настройки локали имеет в том окошечке ещё один интересный параметр:   
   
 Beta: Use Unicode UTF-8 for worldwide language support.   
   
 Я посчитал хорошей идеей поставить эту галочку. Да, не все наши программы используют юникод, но за ним, конечно, будущее. Если винда может мне обеспечить своими средствами мультилокальность -- пожалуйста.   
   
 И вот оказалось, что эта идея была плохая. Именно из-за этой галочки были все проблемы с именами файлов и их содержимым. То есть, галочка работает: интерфейсы программ отображаются верно. Но у её работы есть нюансы.   
   
 В общем, я снял эту галочку. Перезагрузил. И файлы стали открываться нормально.   
    
 <https://diary.ru/~zHz00/p221794809_problemy-s-lokalyu-v-windows-10.htm>   
   
 Теги:   
 [[Лайфхак]]   
 [[Борьба с техникой]]   
 ID: p221794809