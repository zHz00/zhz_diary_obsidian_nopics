Спящий баг
==========

  
2023-04-08, 03:35  
 У нас железка в трёх версиях, 1, 2 и 3. Каждой версии существует разное число экземпляров.   
   
 На все версии у меня один проект прошивки. При помощи условной компилации в нём написано:   
   
 #ifdef VERSION\_1   
 //низкоуровневые настройки для 1-й версии   
 #endif   
   
 И так далее. Различий между версиями немного, но они очень важны. Прошивка, скомпилированная для одной версии, не будет работать на другой. Даже не запустится.   
   
 Естественно, у меня всё автоматизировано. В компиляторе есть нужное число конфигураций, есть кнопка batch build. Когда я готовлю "релиз", я собираю все версии прошивки одним махом и кладу в целевую папку.   
   
 И вот мы стали обновлять ПО у пользователя с самой старой версией железки. А оно не запускается. Не перепрошивали ему железку давно, прошло уже много релизов. Мне пришлось перебрать несколько версий прошивок, прежде чем я нашёл ту, на которой всё перестало работать. Причина была тупая. Я случайно внёс изменения в раздел, который не компилируется, когда идёт сборка для самой новой железки. А тестировали мы всё именно на ней. Когда же идёт компиляция под старую версию, ошибка попадает в прошивку. Ошибку я исправил. (теперь иди, под новой версией железки проверь!)   
   
 Это что за кринж такой? Почему мы не тестируем на старой железке перед релизом? Да потому что нет у нас её. Все экземпляры находятся у пользователей. Единственное нормальное решение -- иметь у себя по одному экземпляру каждой версии. И так можно было бы сделать, если бы железки стоили по сто баксов. Но они стоят гораздо дороже. Получается, что выгоднее ловить баги у пользователей, чем держать у себя три (а в перспективе ещё больше) тестовых стенда.   
  
<https://diary.ru/~zHz00/p221594457_spyawij-bag.htm>  
  
Теги:  
[[Программирование]]  
[[Фейлы]]  
[[Говнокод]]  
[[Борьба с техникой]]  
ID: p221594457  


Комментарии: 6
--------------

  


---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (1/6) | 2023-04-08, 09:17 | CD\_Eater | c755591124 |

  
  Единственное нормальное решение -- иметь у себя по одному экземпляру каждой версии.    
   
 ох уж эти любители решать софтовые проблемы железячным способом ))))   
 мы не смогли грамотно спроектировать проект, поэтому нам потребуется иметь дополнительное железо для тестирования )))   
 ^c755591124

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (2/6) | 2023-04-08, 11:03 | zHz00 | c755591416 |

  
  [CD\_Eater](https://cd-eater.diary.ru "Записки ДискоЕда")  , по мне так гораздо хуже решать железнячные проблемы софтовым способом)))   
 ^c755591416

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (3/6) | 2023-04-08, 11:57 | Xersareeth | c755591641 |

  
 А сколько всего экземпляров этого железа?   
 ^c755591641

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (4/6) | 2023-04-08, 19:10 | CD\_Eater | c755593235 |

  
  по мне так гораздо хуже решать железнячные проблемы софтовым способом)))    
   
 ну, вообще-то микроконтроллеры именно для этого и придуманы - чтобы решать железячные проблемы софтовым способом   
 ^c755593235

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (5/6) | 2023-04-08, 22:10 | zHz00 | c755594246 |

  
  [Xersareeth](https://BurrowDeclassified.diary.ru "One more fang")  , в ЛС расскажу.   
  [CD\_Eater](https://cd-eater.diary.ru "Записки ДискоЕда")  , юморист.   
 ^c755594246

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (6/6) | 2023-04-09, 08:08 | CD\_Eater | c755595463 |

  
 ни разу не юмор   
 ^c755595463