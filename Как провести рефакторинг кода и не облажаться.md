Как провести рефакторинг кода и не облажаться?
===============================================

   
 2017-04-12, 23:58   
  За этим громким названием скрывается всего лишь один трюк. Он применим только к одной очень конкретной ситуации, которая, как мне кажется, не совсем подходит под определения "рефакторинга".   
   
 Но раз уж я написал заголовок, я, пожалуй, всё же отвечу на него.   
   
 Так как же провести рефакторинг кода и не облажаться? Ответ: никак.   
   
 Но кое-от-чего защититься можно.   
   
 Итак, пусть у нас в программе есть об'ект A. Нам надо добавить новый об'ект -- A2, того же класса. Из текущих ситуаций использования A половина должны остаться за ним, а половина -- перейти к A2 (правила определения, кто чем будет заниматься, известны заранее). Ситуации встречаются по всей программе. Об'ект практически глобальный. Как же технически провести эту работу?   
   
 Самое очевидное решение -- пролистать все употребления A и часть перевести на A2 (предварительно создав его). Но так есть риск пропустить что-нибудь, даже если использовать глобальный поиск.   
   
 Я предлагаю способ, благодаря которому пропустить ни одного употребления просто не выйдет. Об'явление об'екта A надо исключить из программы! Либо удалить A, а вместо него создать массив A0[2], либо переименовать A в определении (и только там!) в A1.   
   
 К чему это приведёт? Программа не будет компилироваться из-за употребления несуществующих переменных. Придётся исправлять ошибки...   
   
 Хотя и тут есть возможность сфейлиться. В какой-нибудь функции может быть одноимённый локальный об'ект того же класса. Он раньше перекрывался A, а теперь -- нет. В этом случае ошибки не будет.   
    
 <https://diary.ru/~zHz00/p212508612_kak-provesti-refaktoring-koda-i-ne-oblazhatsya.htm>   
   
 Теги:   
 [[Лайфхак]]   
 [[Программирование]]   
 [[Говнокод]]   
 ID: p212508612