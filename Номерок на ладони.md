Номерок на ладони
=================

  
2021-07-07, 04:48  
 Не помню, писал об этом или нет, но написать ещё раз -- лишним не будет.   
   
 Почему я повесил на работе рядом со столом таблицу приоритетов операций в Си/Си++? Потому что не все они очевидны -- и я на этом накалывался.   
   
 Главный прикол для меня -- это битовые операции. Например, проверим, чему равен последний бит числа:   
   
 if(a&0x1==1)   
 //если последний бит числа установлен, то сделать что-либо   
   
 Как бы не так. Битовые операции имеют приоритет НИЖЕ, чем сравнение. Видимо, считается, что они являются аналогами обычных логических операций, таких как &&, однако это не так. Битовые операции ближе к арифметическим. А арифметические выше, чем сравнения. Противоречие.   
   
 Как же выполняется это условие?   
   
 if(a&(1==1))   
 //...   
   
 Вот так. По чудесному стечению обстоятельств эта конструкция будет работать. Но если бы мы, к примеру, проверяли предпоследний бит, нас бы ждал сюрприз.   
   
 Ну что, Minoru, помог бы мне твой -Wall?   
  
<https://diary.ru/~zHz00/p220786446_nomerok-na-ladoni.htm>  
  
Теги:  
[[Программирование]]  
[[Борьба с техникой]]  
ID: p220786446  


Комментарии: 4
--------------

  


---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (1/4) | 2021-07-07, 12:44 | CD\_Eater | c752445945 |

  
 в си приоритеты такие странные по историческим причинам   
 си++ этот бред переняла и тянет совместимость   
 а люди уже 30 лет не понимают почему так )))   
 ^c752445945

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (2/4) | 2021-07-07, 12:47 | korrshun | c752445961 |

  
 Да.   
   
   `igel@kuroneko:~$ cat a.c`   
   
  `#include <stdio.h>`   
 

   
   `int main(void) {`   
   
  `int a = 1212312;`   
   
  `if (a&0x1==1) {`   
   
  `printf("Jeronimo!");`   
   
  `}`   
 

   
   `}`   
 

   
  `igel@kuroneko:~$ gcc a.c -Wall`   
   
  `a.c: In function ‘main’:`   
   
  `a.c:5:10: warning: suggest parentheses around comparison in operand of ‘&’ [-Wparentheses]`   
   
  `5 |     if (a&0x1==1) {`   
   
  `|          ^`   
   
   
  `igel@kuroneko:~$ g++ a.c -Wall`   
   
  `a.cpp: In function ‘int main()’:`   
   
  `a.cpp:5:14: warning: suggest parentheses around comparison in operand of ‘&’ [-Wparentheses]`   
   
  `5 |     if (a&0x1==1) {`   
   
  `|           ~~~^~~`   
   
 ^c752445961

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (3/4) | 2021-07-07, 12:55 | e1\_huev0 | c752446012 |

  
 Скобки рулят )   
 ^c752446012

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (4/4) | 2021-07-07, 15:59 | Гость | c752447121 |

  
  [korrshun](https://Igel-kun.diary.ru "kimi wo shiranai monogatari")  , спасибо ![:)](/picture/3.gif)   
   
  [zhz00](https://zHz00.diary.ru "Untitled")  , а вот ты возьми и включи теперь -Wparetheses. Не обязательно весь -Wall сразу включать, можно по одному предупреждению…   
   
 -- Minoru   
 ^c752447121