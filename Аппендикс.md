Аппендикс
=========

  
2016-11-09, 23:59  
 Мне дали готовый проект для микроконтроллера когда-то. И вот понадобилось добавить туда поддержку SPI (последовательный аппаратный интерфейс для связи с внешними устройствами). Проект на Си, контроллер LPC.   
   
 Обычно есть готовые библиотеки для работы с частями контроллера. А у контроллера поддержка SPI была. Но заголовочного файла для SPI почему-то не было. Однако файлы имели имена типа lpc\_model\_device.h, где model -- модель устройства, а device -- подсистема контроллера. Например, lpc\_1111\_usart.h -- поддержка USART.   
   
 Забиваю в гугл -- lpc\_1111\_spi.h -- и нахожу библиотеку, из которой были стырены заголовочные файлы проекта, который мне дали. Библиотека от производителя -- NXP. Беру нужные два файла (заголовочный и сишный), качаю, добавляю в проект, пытаюсь собрать.   
   
 Вижу сообщение об ошибке:   
   
 LPC\_SPI\_BASE: identifier not found.   
   
 Как же так. Открываю "базовый" заголовочный файл, содержащий идентификаторы всех устройств (lpc\_1111\_cgu.h). Он имеет ту же дату, что и файл в интернете. Но в файле в интернете этот идентификатор есть! А в моём его нет.   
   
 Смотрю, что написано в моём:   
   
 enum DEVICES   
 {   
 LPC\_DEV1\_BASE=0,   
 //...   
 LPC\_SSP\_BASE,   
 LPC\_I2S\_BASE=LPC\_SSP\_BASE+2,   
 ///...   
 };   
   
 В файле из интернета же после SSP\_BASE расположен SPI\_BASE. То есть авторы проекта его зачем-то не просто вырезали из готовых исходников, но и даже подправили нумерацию, чтобы не сбилась. То есть, это было сделано сознательно. Зачем -- ещё предстоит выяснить.   
  
<https://diary.ru/~zHz00/p210980035_appendiks.htm>  
  
Теги:  
[[Программирование]]  
[[Борьба с техникой]]  
ID: p210980035  


(Комментариев нет)
------------------