Между первой и второй перерывчик небольшой
==========================================

  
2018-08-24, 23:59  
 В WinAPI есть функция SetTimer. Она получает в качестве аргумента время в миллисекундах. И через заданное число миллисекунд генерирует событие, которое можно обработать.   
   
 Уменьшаю время. Уменьшаю. А эффекта нет. Полез в документацию.   
   
 ОКАЗЫВАЕТСЯ, что у SetTimer есть минимальное время, равное 10 мс. Если задавать меньше, всё равно событие будет генерироваться каждые 10 мс. Да, в документации про это написано. Однако поведение очень неожиданное. Например у функции Sleep, которая просто приостанавливает выполнение программы на заданное время, таких ограничений нет.   
   
 Интересно, это ограничение родилось из времён, когда компьютеры были большими? Современные компьютеры и таймер в 1 мс спокойно обработают.   
  
<https://diary.ru/~zHz00/p216093249_mezhdu-pervoj-i-vtoroj-pereryvchik-nebolshoj.htm>  
  
Теги:  
[[Программирование]]  
[[Говнокод]]  
ID: p216093249  


Комментарии: 4
--------------

  


---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (1/4) | 2018-08-26, 15:55 | himself | c734601939 |

  
 Скорее чтобы защитить от ошибок программиста. Ко всему прочему, WM\_TIMER вообще неуклюжая штука на таких интервалах, он же lazy message - если есть другие сообщения в очереди, он не будет сгенерирован. У меня была ситуация, когда окно WM\_SETCURSOR обрабатывало 25мс - в итоге пока мышь была в этом окне, ни один WM\_TIMER не происходил нигде в приложении.   
 ^c734601939

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (2/4) | 2018-08-27, 02:20 | zHz00 | c734617889 |

  
  [himself](http://himself.diary.ru "void")  , а есть ли в винде иной способ надёжной генерации событий через заданные промежутки времени? Хотя бы даже с надёжностью не по времени вызова -- ясно, что это недостижимо, так хотя бы с надёжностью по факту вызова!   
 ^c734617889

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (3/4) | 2018-08-27, 11:23 | himself | c734622152 |

  
  [zHz00](https://zHz00.diary.ru "Untitled")  , отдельный поток c WaitForSingleObject(MY\_INTERVAL)?   
 ^c734622152

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (4/4) | 2018-08-29, 01:16 | zHz00 | c734670495 |

  
  [himself](http://himself.diary.ru "void")  , э-эх, всё-таки придётся отдельный поток пилить. Спасибо!   
 ^c734670495