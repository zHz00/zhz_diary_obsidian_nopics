Типовые алгоритмы зачарования оружия и брони в NetHack
=======================================================

   
 2022-08-19, 00:39   
  Когда-то я написал  [статью-FAQ](https://nethack-rutext.info/doku.php?id=wiki:faq)  , но упустил в нём очень важный раздел: зачарование предметов. Вопрос достаточно обширный, он требует целого нового раздела в FAQ. Тот FAQ я редактировать не буду, вместо этого я сделаю новую статью. Тем не менее, нумерация вопросов из основного FAQ будет продолжена.   
   
   [![](https://i.yapx.ru/TZBwvl.jpg)](https://yapx.ru/v/TZBwv)     
 Хотя есть много ситуативных стратегий по зачарованию оружия, я привожу ту, которой пользуюсь сам. Она довольно проста.   
   
  **V. Зачарование оружия и брони**    
 25. Как и зачем зачаровывать оружие?   
 26. Как и зачем защищать оружие?   
 27. Как и зачем зачаровывать броню?   
 28. Как и зачем защищать броню?   
 29. Как достать драконью броню (dragon scale mail)?   
  [(читать дальше)](https://zHz00.diary.ru/p221295910.htm?index=1#linkmore221295910m1)      
  **25. Как и зачем зачаровывать оружие?**    
 Основная статья:  [nethackwiki.com/wiki/Scroll\_of\_enchant\_weapon](https://nethackwiki.com/wiki/Scroll_of_enchant_weapon)  (EN)   
   
 Зачарованное оружие наносит больше урона. Если оружие +0, то оно наносит столько урона, сколько написано у него в характеристиках, например, 1d6. Если же оружие зачаровано на +3, то оно будет наносить 3+1d6 урона.   
   
 Кроме того, зачарованное оружие лучше попадает по мобам, его ту-хит (to-hit) вырастает на величину зачарования.   
   
 Оружие бывает и отрицательно зачарованным. Как правило, оно проклятое, и использовать его не надо.   
   
 Для улучшения оружия существует свиток улучшения оружия (scroll of enchant weapon). Он имеет одну из самых низких цен в магазинах. Чаще всего вы захотите читать святой свиток. В редких случаях -- непроклятый. Непроклятые свитки всегда добавляют одну единицу зачарования. Святые могут добавить 2 или даже 3 единицы (если оружие слабо зачаровано). Проклятые свитки уменьшают зачарование, не используйте их.   
   
 Перед чтением убедитесь:   
 -- Что вы держите оружие в руках (wield)   
 -- Что ваше оружие полностью идентифицировано (вы видите +0 или другое число)   
 -- Что оружие имеет зачарование +5 или МЕНЕЕ. Если оружие имеет зачарование +6, то не читайте свиток, оно может испариться!   
 -- Что свиток не проклят   
 -- Что вы не растеряны (Conf)   
   
 Ну и вот, после этого читаете свиток и оружие становится немного лучше. Штатными средствами, таким образом, можно зачаровывать оружие до +7. Если у вас было оружие +5, вы прочитали святой свиток, и он добавил две единицы -- то будет как раз +7. Если же не повезло, то он добавит только одну единицу, и будет +6. Дальше зачаровывать уже небезопасно.   
   
 В начале игры чаще всего зачарованием не пользуются, хотя с проклятого оружия таким способом можно снять проклятье. Но сделать оружие святым не выйдет!   
   
 Если вы нашли оружие, с которым собираетесь ходить всю оставшуюся игру, его следует зачаровать. Одного свитка недостаточно, обычно уходит 3-4 свитка.   
   
 Можно зачаровывать:   
 -- Обычное ручное оружие, типа мечей (sword), древкового оружия (polearm) и топоров (axe)   
 -- Наборы кинжалов (dagger), при этом зачаровываться будет весь набор   
 -- Стрелы (arrow) и дротики (dart), тоже зачаровывается весь набор   
   
 Можно, но не нужно зачаровывать:   
 -- Луки (bow) и арбалеты (crossbow) (это улучшает только ту-хит)   
 -- Рога единорога (unicorn horn) и кирки (pick-axe, broad pick, dwarvish mattock) (если только вы ими не пользуетесь как основным оружием)   
   
  **26. Как и зачем защищать оружие?**    
 Основные статьи:   
  [nethackwiki.com/wiki/Scroll\_of\_enchant\_weapon](https://nethackwiki.com/wiki/Scroll_of_enchant_weapon)  (EN)   
  [nethackwiki.com/wiki/Erosion](https://nethackwiki.com/wiki/Erosion)  (EN)   
   
 Почти всё оружие подвержено внешним воздействиям. Металлическое ржавеет, деревянное гниёт и горит. Повреждённое оружие начинает хуже работать. Поэтому при возможности надо оружие делать нержавеющим.   
   
 Какое оружие не надо защищать:   
 -- Рог единорога (unicorn horn), с ним ничего не будет   
 -- Серебряное (silver) оружие, в т.ч. Грейсвандир (Grayswandir)   
 -- Эскалибур (Excalibur), т.к. он уже создаётся защищённым   
 -- Оружие, полученное от бога, по тем же причинам   
 -- Кирка (pick-axe, broad pick, dwarvish mattock), если вы используете её только для копания   
   
 Для того, чтобы добавить защиту, понадобится тот же самый свиток улучшения оружия (scroll of enchant weapon) (непроклятый или святой), но читать его надо в растерянном состоянии (Conf, см. вопрос 19). При таких условиях его можно безопасно читать независимо от степени зачарованности оружия.   
   
 Этот свиток не только делает оружие защищённым, но ещё и чинит весь существующий урон, поэтому если у вас что-нибудь соржавело, не надо сильно волноваться -- это можно будет легко починить.   
   
 Тем не менее, если у вас есть выбор -- зачаровать оружие одним свитком или защитить от ржавчины, то лучше защищать от ржавчины. В среднем, это будет более эффективно.   
   
 Если вам досталось желание, и вы решили пожелать оружие, то в текст желания всегда надо начинать с rustproof, fireproof или fixed. Так вы получите сразу защищённое оружие. Что вы напишете -- не имеет значения, поэтому не надо срочно бежать выяснять материал конкретного оружия чтобы написать правильное слово. Подойдёт любое.   
   
  **27. Как и зачем зачаровывать броню?**    
 Основная статья:  [nethackwiki.com/wiki/Scroll\_of\_enchant\_armor](https://nethackwiki.com/wiki/Scroll_of_enchant_armor)  (EN)   
   
 То, что написано про оружие, во многом касается и брони. Любая броня даёт определённое число "базовых" очков защиты (AC), а зачарование увеличивает это число на столько же, какое зачарование броня имеет. Очевидно, что чем больше суммарная защита, тем лучше, поэтому броню надо зачаровывать. Как и в случае с оружием, зачаровывать желательно только те элементы брони, которые вы собираетесь носить до конца игры. Если вы пока ещё не знаете, что вы будете носить, а зачаровывать уже хочется, то, в порядке убывания приоритета, можете зачаровывать: футболку (shirt), любой металлический шлем (helm, hat) и перчатки (gloves, gauntlets).   
   
 В первую очередь надо зачаровывать предметы, имеющие наименьшее зачарование, потому что они могут получить больше очков защиты за один свиток. Если вы собираетесь зачаровывать всё подряд, то порядок значения не имеет: каждый элемент брони рано или поздно получит свои очки.   
   
 Что же нужно для зачарования? Есть ещё один свиток, свиток улучшения брони (scroll of enchant armor). Он тоже один из самых дешёвых, стоит столько же, сколько свиток снятия проклятья (scroll of remove curse). Обнаружить такие свитки в начале игры легко. Так же, как и с оружием, свиток желательно должен быть святым, потому что он может дать больше одного очка защиты. Непроклятые дают ровно одно очко защиты, а проклятые -- УХУДШАЮТ зачарование. Избегайте их.   
   
 Итак, перед чтением убедитесь:   
 -- Что на вас надет только тот элемент брони, который вы будете зачаровывать (иначе будет выбран случайный предмет из надетых)   
 -- Что зачарование равно +3 или меньше, иначе есть шанс того, что броня испарится. Исключение: эльфийские (elven) предметы можно зачаровывать если они +5 и меньше.   
 -- Что свиток не проклят.   
 -- Что вы не растеряны (Conf).   
   
 После этого читаете свиток, и броня улучшается на 1 очко (свиток непроклят) или на 1-3 (свиток святой). Кроме того, этот свиток снимает проклятье, а святой свиток делает саму броню тоже святой (в отличие от свитка улучшения оружия, который не делает оружие святым).   
   
 Обычно к концу игры все элементы брони (включая щит (shield)) стараются зачаровать как можно больше. На это нужно много свитков, по 2-3 на каждый элемент брони. Их надо добыть тем или иным образом. Можете остановиться, когда общий AC станет -20 или лучше (ниже).   
   
 У зачарованных предметов нет никаких недостатков по сравнению с незачарованными, поэтому зачаровывайте при возможности любую броню, с которой вы собираетесь ходить до конца игры.   
   
  **28. Как и зачем защищать броню?**    
 Основные статьи:   
  [nethackwiki.com/wiki/Scroll\_of\_enchant\_armor](https://nethackwiki.com/wiki/Scroll_of_enchant_armor)  (EN)   
  [nethackwiki.com/wiki/Erosion](https://nethackwiki.com/wiki/Erosion)  (EN)   
   
 Как и оружие, броня может ржаветь и гореть. После этого она начинает работать хуже. Но с бронёй несколько проще -- ухудшаются только базовые очки защиты. Всё, что вы начаровали свитками, остаётся при броне, какой бы ржавой она ни была.   
   
 Оружие надо защищать от ржавчины и горения обязательно. С бронёй ситуация не настолько однозначная.   
   
 Защищать не надо:   
 -- Драконью броню (dragon scale mail), ей ничего не будет   
 -- Мифриловую броню (mithril-coat), ей ничего не будет   
 -- Щит отражения (shiled of reflection, silver polished shield), он из серебра, то же самое   
 -- Футболку (T-shirt, Hawaiian shirt), она имеет базовую защиту 0, поэтому даже сгоревшая характеристик не ухудшит   
   
 Под вопросом:   
 -- Броня, имеющая только 1 очко базовой защиты: сгорит, ну и невелика потеря   
 -- Кожаная и тканевая броня, потому что сгорание это менее вероятная ситуация, чем ржавление   
 -- Нательная броня, скрытая под плащом (cloak), неуязвима   
   
 В общем, если исключить всё, что я написал выше, то останется очень немного предметов. В первую очередь это -- плащ защиты (cloak of protection) (3 очка). Возможно -- шлем (helm, hat) и щит (shield) (по 2 очка). Сапоги (boots) к концу игры обычно носят магические, а у всех магических сапог только одно очко базовой защиты. Тем не менее, Валькириям (Valkyrie) и Монахам (Monk) лучше волшебные сапоги защитить, потому что у них в Квесте (Quest) много лавы (lava), и в неё можно случайно упасть. Это приведёт к немедленному разрушению незащищённых сапог.   
   
 Защитить броню можно двумя способами:   
 -- Чтение непроклятого или святого свитка улучшения брони (scroll of enchant armor), если вы растеряны (Conf, см. вопрос 19). Это чинит весь нанесённый броне урон.   
 -- Чтение  **проклятого**  (!) свитка разрушения (!) брони (cursed scroll of destroy armor), если вы растеряны. Это не чинит урона, только добавляет защиту.   
   
 Второй метод предпочтительнее, но менее доступен. Во-первых, найти именно проклятый свиток -- маловероятно. Во-вторых, сделать свиток проклятым -- слишком сложно. Но если вы собираетесь  *написать*  свиток, то лучше конечно писать проклятый свиток разрушения брони, потому что на него нужно меньше чернил. А несколько чистых проклятых листов бумаги за игру обычно находится.   
   
 Если вы решили заказать броню из желания, то, как и в случае с оружием, следует дописывать fireproof, rustproof или fixed к желаемому предмету. Тогда броня будет сразу же защищённой. Хотя драконья броня не ржавеет, многие на всякий случай всё равно дописывают fixed, чтобы не ошибиться в других ситуациях.   
   
  **29. Как достать драконью броню (dragon scale mail)?**    
 Основная статья:  [nethackwiki.com/wiki/Dragon\_scale\_mail](https://nethackwiki.com/wiki/Dragon_scale_mail)  (EN)   
   
 Сначала я похвалю драконью броню. Она лёгкая, даёт 9 (!) базовых очков защиты, не ржавеет, не горит, не мешает колдовать, а ещё имеет специальное свойство, зависящее от цвета брони.   
   
 Наиболее интересны доспехи из серебряного или серого дракона.   
   
 Броня серого дракона (Gray dragon scale mail, GDSM) даёт сопротивление магии -- magic resistance.   
 Броня серебряного дракона (Silver dragon scale mail, SDSM) даёт отражение -- reflection.   
   
 Оба эти свойства являются ключевыми для прохождения игры.   
   
 Как достать броню:   
 1. Желание (wish). Если вам досталось желание в начале игры, то его почти всегда надо тратить на драконью броню. Цвет зависит от текущей ситуации.   
 -- Если вы уже имеете сопротивление магии или отражение, то надо заказывать то, чего нет.   
 -- Если вы ещё не прошли Сокобан (Sokoban), то надо заказывать броню серого дракона, потому что в Сокобане может быть амулет отражения   
 -- Если вы прошли Сокобан, и не нашли амулета, то выбор во многом философский. Отражение помогает в бОльшем числе случаев, но опасности, от которых помогает сопротивление магии, более смертельны. Главная опасность, от которой не спасёт броня серебряного дракона -- это ловушка полиморфа (polymorph trap). Но если вы в драконьей шкуре, то при полиморфе вы всё равно превратитесь в дракона (порвав футболку (shirt) и плащ (cloak)). А это не самое плохое, что может случиться. Моё мнение такое: если вы получили желание на первых уровнях, но уже прошли Сокобан, то лучше заказывать серебряного дракона. Если же вы приближаетесь к Замку (Castle) -- то серого, потому что на уровне Медузы (Medusa' Island) с большим шансом можно найти щит отражения (shield of reflection, silver polished shield), и тогда у вас будут закрыты оба свойства.   
 2. Просто убить дракона.   
 Драконы рано или поздно начинают случайно генерироваться в игре. Четыре гарантированно есть в Замке. Ещё несколько -- в Форте Лудиос (Fort Ludios). Любой убитый дракон имеет шанс 1/3 выкинуть чешую (set of dragon scales) своего цвета. Да, это может быть не та чешуя, которую вы хотели, но броня любого цвета лучше, чем её отсутствие.   
 3. Обратный геноцид.   
 Если вам позарез надо иметь броню, но нет возможности потратить на неё желание, есть один опасный, но интересный метод. Итак:   
 а) Находите или пишете проклятый свиток геноцида (cursed scroll of genocide)   
 б) Находите или пишете свиток пугания (scroll of scare monster). Свитки в Замке и Сокобане прокляты, не подбирайте их, а то они разрушатся! (пользоваться на месте можно)   
   
  *Примечание.*  Напоминаю, как использовать свиток пугания. Его не надо читать. Его надо выложить из инвентаря себе под ноги. После этого большинство монстров не будут вас атаковать. После каждого выкладывания свиток теряет одну градацию святости, а если он уже проклят -- то при попытке поднимания свиток разрушится.   
   
 в) Если у вас нет отражения в любом виде, лучше остановитесь, поскольку будет очень опасно   
 г) встаёте в удобном месте, под ноги кладёте свиток пугания и читаете проклятый свиток геноцида (не будучи растерянным (Conf)!)   
 д) в появившейся строке вводите название нужного вида дракона   
 е) вас окружают от 4 до 6 драконов   
 ж) их надо убить; очень высок шанс, что хотя бы с одного упадёт чешуя   
   
 Свиток пугания предотвратит нападение на вас врукопашную, но вот дыхание он предотвратить не сможет. Серебряные драконы дышат холодом, поэтому если у вас есть сопротивление (cold resistance), а все зелья вы попрятали, то можете вызывать драконов и так. Серые драконы дышат магией, поэтому если у вас нет ни сопротивления магии, ни отражения -- вы умрёте сразу, как только драконы отойдут от вас (после этого они начнут плеваться).   
   
 Если вы получили чешую при помощи убийства драконов, то это будет не полноценная броня, а только чешуя (set of dragon scales -- это не dragon scale mail!). Несмотря на лёгкость и иные преимущества, она будет давать всего 3 очка защиты. Чтобы получить полноценную броню, её надо заколдовать. Делается это так же, как зачарование обычной брони.   
   
 А именно -- при помощи свитка улучшения брони (scroll of enchant armor). Надеваете на себя чешую, читаете свиток -- и вуаля, на вас надета драконья броня, которая значительно лучше чешуи. Если свиток был святой, броня сразу станет +1.   
   
 Помните, я выше писал про полиморф в дракона? После полиморфа в дракона броня превращается обратно в чешую, и её надо перезачаровывать. Если она уже была больше, чем +3, то есть шанс, что она испарится при зачаровании, даже если фактической прибавки не планировалось (свиток был непроклят). Поэтому броню серебряного дракона не надо уж слишком сильно зачаровывать до тех пор, пока вы не приобретёте сопротивление магии.   
   
 Обратите внимание, что в игре кроме драконов есть ещё детёныши драконов (baby dragon). С них чешуя не падает.   
   
  **UnNetHack.**  В этом форке есть следующие особенности:   
 а) желания не из палочек (wand of wishing) (а это все ранние желания) не позволяют получить магические предметы, к которым относится броня, но позволяют получить чешую   
 б) названия драконов теперь случайные, и не связаны с их свойствами, поэтому пока вы не увидите в деле магического (magical dragon) и отражающего (reflecting dragon) дракона, вы не сможете понять, что надо заказывать (или каких драконов подвергнуть обратному геноциду)   
 в) в игре есть Хроматические драконы (Chromatic dragon), чья броня даёт сразу несколько сопротивлений; хотя получение этой брони не гарантировано, но если у вас всё получится, то хроматическая броня однозначно лучше любой другой.   
 г) драконья броня даёт только 5 базовых очков защиты вместо 9.   
   
  **Другие варианты.**  В некоторых вариантах (например, в dNetHack) драконья броня даёт дополнительные эффекты. Из всех цветов следующей по интересности становится броня жёлтого дракона (yellow dragon scale mail) (в dNetHack, FIQHack, а также в ванили с версии 3.7.0, которая ещё не вышла). Она даёт помимо стандартного сопротивления кислоте (acid resistance) -- ещё и сопротивление окаменению (stoning resistance). А в dNetHack кислотные атаки значительно распространённее и значительно опаснее, чем в ванили. Не говоря уже об окаменении, которое там на каждом углу. При этом ни то, ни другое сопротивление не могут быть приобретены путём поедания трупов.     
    
 <https://diary.ru/~zHz00/p221295910_tipovye-algoritmy-zacharovaniya-oruzhiya-i-broni-v-nethack.htm>   
   
 Теги:   
 [[NetHack]]   
 [[Статьи]]   
 ID: p221295910