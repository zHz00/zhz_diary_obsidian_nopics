Классические фейлы: повторное использование переменных
======================================================

  
2019-03-19, 23:44  
 У меня в программах часто используются переменные x, y, z. Для циклов.   
   
 Когда мне надо сделать очередной цикл, я беру одну из уже об'явленных переменных и её бесстыдно использую.   
   
 Что же может пойти не так? Большинство циклов короткие, но не все. Сегодня я попался на том, что начало цикла с переменной икс было две страницы назад. А потом я внутри цикла с этой переменной организовал ещё один цикл с иксом.   
   
 Внутренний цикл, естественно, работал. А вот внешний -- нет. Он выполнялся неправильное количество раз из-за неправильного значения икса.   
   
 Как же от этого защититься?   
   
 1. Об'являть переменные специально для циклов:   
 for(int x=0;x<10;x++)   
   
 В голом Си это может не сработать (зависит от версии).   
   
 2. Перед использованием переменной, которую не об'явил только что, провести расследование, где она ещё встречается.   
   
 3. Не использовать такие переменные вовсе. Если переменная уже есть, сделать ещё одну. Как правило, проблем с нехваткой памяти сейчас не бывает. Если вам приходится до такой степени экономить память на микроконтроллере, то поставьте более крутой микроконтроллер.   
  
<https://diary.ru/~zHz00/p217359684_klassicheskie-fejly-povtornoe-ispolzovanie-peremennyh.htm>  
  
Теги:  
[[Программирование]]  
[[Фейлы]]  
ID: p217359684  


Комментарии: 3
--------------

  


---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (1/3) | 2019-03-20, 00:29 | Xersareeth | c739404643 |

  
 \* с ужасом вспоминает времена, когда вместо итераторов приходилось использовать циклы \*   
   
 =Р   
   
 А вообще, статический анализ кода вроде должен ловить такое?   
 ^c739404643

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (2/3) | 2019-03-20, 00:51 | zHz00 | c739405018 |

  
 А, итераторы! Знаем-знаем! У них ещё бантик сбоку, да?   
   
 Статический анализ кода 100% поймал бы. Но:   
 а) я им не пользуюсь (а надо бы)   
 б) если я начну им пользоваться, то я припухну, т.к. придётся исправлять половину программы, потому что -- говнокод!   
 ^c739405018

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (3/3) | 2019-03-20, 09:31 | Xersareeth | c739408163 |

  
 Бантик будет там, куда я его передам! Можно и сбоку! =)   
 ^c739408163