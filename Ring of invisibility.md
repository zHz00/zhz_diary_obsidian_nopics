Ring of invisibility
=====================

   
 2014-03-05, 23:46   
  Сообщения в Windows всегда посылаются окну. И тут я оказался в ситуации, когда сообщение принять надо, а окна нет. Что же делать? Мне посоветовали два метода решения:   
   
 1. Использовать PostThreadMessage. Такие сообщения посылаются не окну, а потоку. Проблема: если поток впадёт в какой-либо посторонний цикл обработки сообщений (который не имеет отношение к вашей обработке, например, внутри вызова MessageBox), ваше сообщение будет похерено.   
 2. Создать невидимое окно и посылать сообщения туда. Как оказалось, разработчики винды предвидели это и создали специальный тип окна  ["только для сообщений"](https://msdn.microsoft.com/en-us/library/windows/desktop/ms632599(v=vs.85).aspx#message_only)  . Для его создания надо при вызове функции CreateWindowEx 4-й параметр с конца (hWndParent) установить в HWND\_MESSAGE. Пример:  [stackoverflow.com/questions/4081334/using-creat...](https://stackoverflow.com/questions/4081334/using-createwindowex-to-make-a-message-only-window)    
    
 <https://diary.ru/~zHz00/p195999398_ring-of-invisibility.htm>   
   
 Теги:   
 [[Программирование]]   
 ID: p195999398