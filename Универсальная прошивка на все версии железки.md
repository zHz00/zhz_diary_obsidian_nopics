Универсальная прошивка на все версии железки?
=============================================

  
2023-07-06, 04:46  
 Наши друзья из соседней организации продолжают делать нам железку, которая постепенно меняется. До текущего момента было три варианта, и я делал по одной версии прошивки на каждый из них. Сейчас стало понятно, что будет ещё минимум три варианта. Следить за этими вариантами и собирать под каждый из них по отдельной прошивке -- это геморрой. Поэтому мы придумали вот что.   
   
 Микроконтроллер содержит в себе отдельный блок энергонезависимой памяти (FRAM), в который можно что-то писать. Вот туда-то мы и будем записывать текущую версию железки и её конфигурацию. А прошивка при старте будет оттуда считывать capabilities и дальше выполнять нужные куски для настройки и т.п. Файл прошивки при этом будет один и тот же. Это не снимет проблем с тестированием, но снимет проблемы со сборкой и выбором нужной версии при прошивке.   
   
 Что же делать в аналогичных случаях, когда нет выделенного блока памяти? Тогда можно писать в основной флеш, предназначенный для прошивки. В другом проекте на STM32 я указал в разметке памяти (map-файл), что последний сектор не надо ни записывать, ни стирать. И после этого хранил там свои данные (это были настройки).   
  
<https://diary.ru/~zHz00/p221684427_universalnaya-proshivka-na-vse-versii-zhelezki.htm>  
  
Теги:  
[[Лайфхак]]  
[[Программирование]]  
ID: p221684427  


Комментарии: 3
--------------

  


---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (1/3) | 2023-07-06, 17:01 | Foul thing | c755877846 |

  
 Привет. Слушай, что ты думаешь про такой  [курс](https://www.youtube.com/playlist?list=PLb-MsRpo_wlLW0EWRpAqnbbDsf4kxSI1x)  лекций? Насколько это соотносится с тем, что ты делаешь, и насколько этого достаточно, чтобы начать работать в этом направлении?   
 ^c755877846

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (2/3) | 2023-07-07, 01:03 | zHz00 | c755879997 |

  
  [Foul thing](https://foulthing.diary.ru "Temporary Internet Flies")  , да, это оно. Насколько достаточно -- не уверен. Для того чтобы начать -- наверное, достаточно.   
   
 Также рекомендую освоить игру Turing Complete.   
   
 Ты решил в эмбедщики податься? Почему?   
 ^c755879997

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (3/3) | 2023-07-07, 01:54 | Foul thing | c755880031 |

  
 А потому что С++ в Штатах на 75, наверное, процентов применяется в embedded, и найти не-embedded работу очень тяжело. Я все думал, как бы научиться, и тут внезапно этот курс лекций попался.   
 ^c755880031