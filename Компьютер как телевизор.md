Компьютер как телевизор
========================

   
 2018-09-22, 23:59   
  Мне надо было посмотреть точно, как устроено крепление жёсткого диска в системном блоке.   
   
 Я выключил компьютер, снял боковые крышки и посмотрел. В процессе этого я отключал и подключал один из винчестеров.   
   
 Включаю обратно -- винда прогружается в "восстановление системы". А винда у меня не на винчестерах, а на SSD, который я не трогал (и не мог потрогать). Что же случилось?   
   
 Ну ладно, попробуем восстановиться... стоп, что такое? Восстановление системы не реагирует ни на клавиатуру, ни на мышку. Ага, это потому что в дистрибутиве винды не было встроенных USB-драйверов для моего чипсета (Windows 7 слишком старенькая). В сам дистрибутив-то я их встроил, а в "восстановление системы" -- нет. Подключить же PS/2 устройства я не могу, поскольку некуда.   
   
 Что ж, беру диск с дистрибутивом и запускаюсь оттуда. Восстановление системы почему-то успешно запускается. Долго шуршит прогресс барами, потом говорит, что всё починено, можете посмотреть отчёт. В отчёте примерно такое:   
   
 1. Причина один -- всё нормально (0x0).   
 2. Причина два -- всё нормально (0x0).   
 ... (остальное тоже -- всё нормально)   
 21. Причина 21 -- по-видимому, дело в каком-то драйвере или что-то такое. Мы вроде всё проверили, и всё ок.   
   
 То есть, причина доподлинно установлена не была. Я попробовал перезагрузиться -- но винда опять не загрузилась. Что было конкретно исправлено -- неясно.   
   
 Кто же его знает, что это за драйвер сбоит? У меня компьютер не выключается, за месяц я могу поставить очень много всякой ерунды. Естественно, я не помню, что я понаставил, и что из понаставленного поставило заодно и драйвер. Что ясно точно -- что это не драйвера USB и не драйвера NVMe, поскольку с ними у меня запустился диск с дистрибутивом, а в уже установленной винде я их не обновлял.   
   
 Ну ладно, попробуем Last Known Good Configuration.   
   
 Эта опция появилась впервые в Windows XP. Я читал рассказы зубров-администраторов о том, каким спасением для них она была. И о том, как они мучились с восстановлением винды до этого, поскольку заставить винду грузиться без драйвера, который сбоит, было проблематично. При загрузке же в данном режиме винда автоматически загружает не те драйвера, которые должна загрузить по текущим настройкам, а те, которые загружала в предыдущий раз. Это спасает от только что установленных плохо работающих драйверов.   
   
 В общем, винда загрузилась. А кто сбоит -- я, возможно, ещё узнаю. Но не сейчас.   
   
 С одной стороны, я, конечно, виноват сам -- я же видел, что на установочном диске для консоли восстановления предусмотрен отдельный WIM-файл. Мог бы я и догадаться, что драйвера USB (а заодно и NVMe) надо встраивать туда тоже.  Однако не факт, что встроенная консоль восстановления берётся именно из этого WIM-файла, а не откуда-то ещё.    
   
 Но с другой стороны, восстановление системы, даже со всеми установленными драйверами, не отработало: оно верно определило, что дело в каком-то драйвере, но не смогло его ни определить, ни отключить. Кроме того, непонятно, зачем вообще винда при неуспешной загрузке сразу запускает "восстановление системы" вместо Last Known Good/Safe Mode.   
    
 <https://diary.ru/~zHz00/p216269581_kompyuter-kak-televizor.htm>   
   
 Теги:   
 [[Борьба с техникой]]   
 ID: p216269581