Найти лазейку
==============

   
 2022-11-14, 04:03   
  Папа присылает анимированный стикер в телегу и говорит -- теперь этот стикер надо отправить маме в вотсапп!   
   
 \*взрыв мозга\*   
   
 Я ему об'яснил, что сделать это невозможно, потому что телеграм сохраняет стикеры в неизвестном формате tgs, а даже если нет, то это будет WebP, который вотсапп не знает. Могу предложить запись захватом экрана.   
   
 Папа говорит -- а ты не пробовал этот tgs переименовать? Вдруг откроется.   
   
 Мысль была здравая, я посмотрел на размер и содержимое tgs файла и WebP файла. tgs имел непонятную сигнатуру, а WebP имел сигнатуру RIFF. Но главная странность была в том, что WebP одиночной картинки весил 200 килобайт, а tgs анимированного стикера весил... 50 килобайт.   
   
 Я набрал в гугле TGS to GIF -- и моментально обнаружил телеграмного бота, который делает то, что мне надо. Но выходные файлы этого бота имели размер по 3 мегабайта на стикер. Вывод напрашивался один -- tgs это не формат стикеров. Это формат идентификаторов или хэшей стикеров. Если обычный стикер можно сохранить на диск как WebP, то анимированный нет.   
   
 Но ладно, я получил GIF-файл, а дальше уже было дело техники: для превращения в MP4 достаточно этот гиф отправить через телеграм кому-нибудь, а потом скачать обратно. И он уже будет пригоден для вотсаппа.   
   
  **UPD.**  ОКАЗЫВАЕТСЯ, tgs это всё-таки формат стикеров. Это архив, содержащий в себе анимацию в формате Adobe After Effects. Формат векторный, поэтому размер такой маленький.   
    
 <https://diary.ru/~zHz00/p221397829_najti-lazejku.htm>   
   
 Теги:   
 [[Борьба с техникой]]   
 [[Telegram]]   
 ID: p221397829