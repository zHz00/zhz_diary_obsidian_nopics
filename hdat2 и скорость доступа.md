hdat2 и скорость доступа
========================

  
2018-02-09, 23:57  
 Один из моих двухтерабайтных винчестеров под подозрением. Гонял его как сидорову козу, пока работает. Для финальной проверки мне посоветовали программу hdat2.   
   
 Запустил. Скорость проверки оказалась удручающе низкой -- за ночь в режиме read-write-read-compare он проверил только два процента диска! Это около трёх недель реального времени на всё. Другие же программы управлялись со всем диском за 4-12 часов.   
   
 В общем, дело было в режиме доступа. По умолчанию стоял pio. Я поставил ext\_int13h (доступ через биос) и скорость выросла вчетверо! Теперь он управится всего за шесть суток. Не думал, что когда-нибудь буду благодарить производителей винчестеров за то, что у них килобайт равен тысяче байт.   
   
 А программа под дос, компьютером пользоваться не могу. Это я к тому, что со смартфона печатать неудобно. Включу-ка ноутбук.   
  
<https://diary.ru/~zHz00/p214816524_hdat2-i-skorost-dostupa.htm>  
  
Теги:  
[[Борьба с техникой]]  
ID: p214816524  


Комментарии: 3
--------------

  


---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (1/3) | 2018-02-10, 01:59 | Stigravian Shaderstill | c729737864 |

  
 А откуда подозрения взялись? CrystalDiskInfo выдал тревогу?   
 ^c729737864

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (2/3) | 2018-02-10, 03:03 | zHz00 | c729738462 |

  
 Ох... Дело было так:   
   
 я полез во включённый компьютер, чтобы посмотреть, как там что подключено. На следующий день я обнаружил, что один из винчестеров выпал из зеркального рейд-массива (созданного средствами винды). И это произошло примерно в то же время, когда я лазил в системный блок. Как выяснилось, винчестер был подключен сата-кабелем без защёлки! И велик шанс того, что я шевеля кабелями нарушил контакт, поэтому винчестер отвалился.   
   
 После этого я, естественно, сразу удалил зеркало, т.к. не был уверен, с какой копии будет ресинхронизироваться зеркало, если винчестер станет виден опять. После перезагрузки винчестер действительно появился. Я удалил с него все разделы, т.к. в несинхронизированном виде они бесполезны. А потом попытался снова создать зеркало с помощью имеющейся копии (на втором винчестере данные сохранились в полном объёме), однако винда мне стала показывать сообщение об ошибке:   
   
 
>  Произошла ошибка при выполнении операции, так как информация в оснастке диспетчера дисков устарела. Обновите данные при помощи операции обновления.Если ошибка сохранится, закройте окно оснастки диспетчера дисков, затем перезапустите эту службу или перезагрузите компьютер. 

   
   
 Естественно, перезагрузка ничего не дала. Гугление ничего не дало. И встал вопрос -- это диск подох от того что я его нагорячую отключил, или винда на голову долбанутая? Незеркальные разделы создаются на ура, информация пишется и читается хорошо, бэд-блоков ноль, но в смарте присутствует сообщение о 22 ошибках передачи UDMA. Обычно это связано с плохим кабелем -- а кабель я как раз шевелил. В общем, прежде, чем продолжать борьбу с виндой, хочу убедиться, что диск 100% функционирует.   
 ^c729738462

---



|         #         |              Дата              |                     Автор                     |           ID           |
| --- | --- | --- | --- |
| (3/3) | 2018-02-12, 13:19 | deadlymercury | c729806013 |

  
 Скорее, венда тупая, чем диск умерший)   
   
 У нас та же фигня была с дебианом - установка на софтварный рейд5 из 4х 8тб дисков была умопомрачительно медленной - копировал файлы несколько часов, когда обычно дел минут на 20 на ВСЕ.   
   
 Точно также были подозрения, что один диск "умирает", точно так же проверялись все диски - все абсолютно целые и здоровые, ни у кого никаких проблем нет.   
 Потом ставили на рейд1 и рейд10 - аналогично, ну очень медленно. На любых дисках и любых контроллерах за исключением разумеется хардварного рейда.   
   
 Причем сама система работает нормально, проблема проявляется только в инсталляторе...   
   
 Короче, путь тебе на answers.microsoft.com ![:)](http://static.diary.ru/picture/3.gif)   
 ^c729806013